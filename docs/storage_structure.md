# 存储结构说明

## 概述
项目目录用于存储实验协议、会话数据和分析结果。

## 目录结构

```
DevProj/
├── DevProj.mat                    # 项目主配置文件
└── Protocols/                     # 协议目录
    └── Protocol 1/                # 协议1目录
        ├── Protocol 1.mat         # 协议配置文件
        ├── cortex_info.mat        # 皮层信息文件
        ├── leadfield_info.mat     # 前导场信息文件
        ├── Results/               # 结果目录
        │   └── res.mat            # 分析结果文件
        └── Sessions/             # 会话目录
            └── Session 1/         # 会话1目录
                ├── ERPset.mat     # 数据文件
                └── session_info.mat # 会话信息文件
```

其中文件夹结构不得改变，info文件与文件夹位置关系不得改变，其他文件可用自由命名，放在任意位置，由info文件指定路径。

> 这种储存结构可以避免拷贝，但是代价就是一旦移动文件，无法再次找到，重新链接的逻辑目前没有写入软件。

## 文件说明



### 根目录文件

| 文件名 | 类型 | 说明 |
|--------|------|------|
| XxxProj.mat | MATLAB数据文件 | 项目主配置文件，包含项目的整体配置信息和元数据 |

### Protocols 目录

存储所有实验协议的目录，每个协议对应一个子目录。

#### 协议目录结构

每个协议目录（如 `Protocol 1/`）包含以下文件和子目录：

| 文件/目录名 | 类型 | 说明 |
|-------------|------|------|
| Protocol 1.mat | MATLAB数据文件 | 协议配置文件，包含该协议的参数设置和配置信息 |
| cortex_info.mat | MATLAB数据文件 | 皮层信息文件，存储大脑皮层和功能信息 |
| leadfield_info.mat | MATLAB数据文件 | 引导场信息文件，存储源定位所需的引导场矩阵 |
| Results/ | 目录 | 存储该协议的分析结果 |
| Sessions/ | 目录 | 存储该协议的所有实验会话数据 |

#### Results 目录

存储协议的分析结果。

| 文件名 | 类型 | 说明 |
|--------|------|------|
| res.mat | MATLAB数据文件 | 分析结果文件，由data文件指向 |

> 目前一个data只支持一个result，如要扩展把data的res_path改为数组即可。

#### Sessions 目录

存储协议下的所有实验会话，每个会话对应一个子目录。

##### 会话目录结构

每个会话目录（如 `Session 1/`）包含以下文件：

| 文件名 | 类型 | 说明 |
|--------|------|------|
| ERPset.mat | MATLAB数据文件 | 数据文件，存储原始或预处理后的脑电数据，可以自由命名 |
| session_info.mat | MATLAB数据文件 | 会话信息文件，包含会话的元数据、实验参数、被试信息等，不可自由命名 |

## 数据层级关系

```
DevProj (项目)
  └── Protocols (协议)
      └── Protocol (协议实例)
          ├── Protocol配置
          ├── 皮层信息
          ├── 前导场信息
          ├── Results (分析结果)
          └── Sessions (会话)
              └── Session (会话实例)
                  ├── 数据
                  └── 会话信息
```

## 扩展性说明

- **多协议支持**：Protocols目录下可包含多个协议（Protocol 1, Protocol 2, ...）
- **多会话支持**：每个协议下可包含多个会话（Session 1, Session 2, ...）
- **多结果支持**：Results目录下可存储多个分析结果文件

## 数据流程

以样例 DevProj 为例

1. **项目初始化**：创建DevProj.mat配置项目
2. **协议创建**：在Protocols下创建协议目录，配置协议参数
3. **会话数据采集**：在Sessions下创建会话目录，存储ERP数据
4. **数据分析**：基于会话数据进行处理，结果存储在Results目录
